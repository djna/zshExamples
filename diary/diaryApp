#!/bin/zsh

emulate -LR zsh

fpath=(./functions $fpath)
autoload -U ${fpath[1]}/*(:t)

APP="${0:t:r}"

message "loading functions from \n$(print -l $fpath)\n"
message "$APP running in $(ps -o args= -p $$ )\n "
read -k 1 "dummy?press any key to begin ... "

function displayMenu() {
    clear
    echo "$APP actions: Quit"
}

if [[ ! -d data ]]; then
    mkdir data
fi

if [[ ! -d data/memos ]]; then
    mkdir data/memos
fi

MAIN_ERR=""
while [ true ]
do
    displayMenu

    read "ACTION?${MAIN_ERR}Action "
    MAIN_ERR=""

    case "${ACTION:u}" in
        Q|QUIT)
            read -q "CONFIRM?Quit? (y/n) " CONFIRM
            if [[ "$CONFIRM" = "y" ]]; then 
                echo "\n\n${0:t} terminating on request\n\n"
                exit 0 
            else
                continue
            fi
            ;;
        *)
            MAIN_ERR="Unknown Action $ACTION "
    esac
done

